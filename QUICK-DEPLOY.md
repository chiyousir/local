# ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥

### 1. è™šæ‹Ÿä¸»æœºè¦æ±‚
- âœ… æ”¯æŒNode.jsç¯å¢ƒ
- âœ… æ”¯æŒnpmåŒ…ç®¡ç†å™¨
- âœ… æ”¯æŒSQLiteæ•°æ®åº“
- âœ… å¼€æ”¾80ç«¯å£ï¼ˆæˆ–æŒ‡å®šç«¯å£ï¼‰

### 2. å‡†å¤‡æ–‡ä»¶
ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å·²å‡†å¤‡å¥½ï¼š
```
â”œâ”€â”€ server-production.js    # ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨
â”œâ”€â”€ package.json            # ä¾èµ–é…ç½®
â”œâ”€â”€ ecosystem.config.js     # PM2é…ç½®
â”œâ”€â”€ deploy.sh              # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ check-deployment.js    # éƒ¨ç½²æ£€æŸ¥
â””â”€â”€ public/                # é™æ€æ–‡ä»¶ç›®å½•
```

## ğŸš€ ä¸€é”®éƒ¨ç½²

### æ–¹æ³•1ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# 1. ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶åˆ°è™šæ‹Ÿä¸»æœº
# 2. åœ¨è™šæ‹Ÿä¸»æœºç»ˆç«¯æ‰§è¡Œï¼š
chmod +x deploy.sh
./deploy.sh
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨éƒ¨ç½²
```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. å®‰è£…PM2
npm install -g pm2

# 3. å¯åŠ¨åº”ç”¨
npm run pm2:start

# 4. æ£€æŸ¥çŠ¶æ€
npm run check
```

## ğŸ”§ é…ç½®è¯´æ˜

### 1. ç«¯å£é…ç½®
å¦‚æœè™šæ‹Ÿä¸»æœºä½¿ç”¨å…¶ä»–ç«¯å£ï¼Œä¿®æ”¹ `ecosystem.config.js`ï¼š
```javascript
env: {
  NODE_ENV: 'production',
  PORT: 8080  // æ”¹ä¸ºæ‚¨çš„ç«¯å£
}
```

### 2. åŸŸåé…ç½®
åœ¨è™šæ‹Ÿä¸»æœºæ§åˆ¶é¢æ¿ä¸­ï¼š
1. ç»‘å®šæ‚¨çš„åŸŸå
2. è®¾ç½®åŸŸåè§£æ
3. é…ç½®SSLè¯ä¹¦ï¼ˆæ¨èï¼‰

### 3. ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
NODE_ENV=production
PORT=80
DB_PATH=./location_tracker.db
ALLOWED_ORIGINS=https://yourdomain.com
```

## ğŸ“Š éƒ¨ç½²åæ£€æŸ¥

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
pm2 status
```

### 2. æŸ¥çœ‹æ—¥å¿—
```bash
pm2 logs location-tracker
```

### 3. è¿è¡Œæµ‹è¯•
```bash
npm run check
```

### 4. è®¿é—®ç½‘ç«™
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://your-domain.com`

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡
npm run pm2:start

# åœæ­¢æœåŠ¡
npm run pm2:stop

# é‡å¯æœåŠ¡
npm run pm2:restart

# æŸ¥çœ‹æ—¥å¿—
npm run pm2:logs

# æ£€æŸ¥éƒ¨ç½²
npm run check

# æŸ¥çœ‹çŠ¶æ€
pm2 status
```

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tulpn | grep :80
# æ€æ­»è¿›ç¨‹
kill -9 PID
```

### é—®é¢˜2ï¼šæƒé™é—®é¢˜
```bash
# è®¾ç½®æ–‡ä»¶æƒé™
chmod 755 server-production.js
chmod 755 public/
chmod 666 location_tracker.db
```

### é—®é¢˜3ï¼šä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…ç†ç¼“å­˜
npm cache clean --force
# é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

### é—®é¢˜4ï¼šPM2å¯åŠ¨å¤±è´¥
```bash
# é‡æ–°å®‰è£…PM2
npm uninstall -g pm2
npm install -g pm2
# é‡æ–°å¯åŠ¨
pm2 start ecosystem.config.js --env production
```

## ğŸ“± ç§»åŠ¨ç«¯é…ç½®

### 1. HTTPSé…ç½®
ç§»åŠ¨ç«¯å®šä½éœ€è¦HTTPSï¼Œç¡®ä¿ï¼š
- SSLè¯ä¹¦æœ‰æ•ˆ
- åŸŸåæ”¯æŒHTTPS
- ç«¯å£443å¼€æ”¾

### 2. è·¨åŸŸé…ç½®
åœ¨ `server-production.js` ä¸­é…ç½®ï¼š
```javascript
app.use(cors({
  origin: ['https://yourdomain.com'],
  credentials: true
}));
```

## ğŸ¯ éƒ¨ç½²æˆåŠŸæ ‡å¿—

- âœ… æœåŠ¡å™¨æ­£å¸¸å¯åŠ¨
- âœ… ç«¯å£ç›‘å¬æ­£å¸¸
- âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
- âœ… APIæ¥å£å“åº”æ­£å¸¸
- âœ… é™æ€æ–‡ä»¶è®¿é—®æ­£å¸¸
- âœ… ç§»åŠ¨ç«¯å®šä½åŠŸèƒ½æ­£å¸¸

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥è™šæ‹Ÿä¸»æœºæ˜¯å¦æ”¯æŒNode.js
2. ç¡®è®¤ç«¯å£é…ç½®æ­£ç¡®
3. éªŒè¯åŸŸåè§£æ
4. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
5. è¿è¡Œéƒ¨ç½²æ£€æŸ¥è„šæœ¬

## ğŸ‰ éƒ¨ç½²å®Œæˆ

æ­å–œï¼æ‚¨çš„ç½‘ç«™å·²æˆåŠŸéƒ¨ç½²åˆ°äº‘è™šæ‹Ÿä¸»æœºï¼

è®¿é—®åœ°å€ï¼š`http://your-domain.com`
